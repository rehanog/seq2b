(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function h(e){return window.go.main.App.GetPage(e)}let c="Page A",a=[];const k=document.getElementById("pageTitle"),u=document.getElementById("backButton"),f=document.getElementById("blocks"),d=document.getElementById("backlinksList"),s=document.getElementById("loading");document.addEventListener("DOMContentLoaded",()=>{m(c),v()});function v(){u.addEventListener("click",g)}async function m(e){try{s.style.display="block",f.innerHTML="",d.innerHTML="";const t=await h(e);k.textContent=t.title,p(t.blocks,f),b(t.backlinks),c!==e&&(a.push(c),u.disabled=!1),c=e,s.style.display="none"}catch(t){console.error("Error loading page:",t),s.innerHTML=`Error loading page: ${t.message||t}`}}function p(e,t){e.forEach(i=>{const o=y(i);t.appendChild(o)})}function y(e){const t=document.createElement("div");t.className="block",t.setAttribute("data-depth",e.depth),t.setAttribute("data-block-id",e.id);const i=document.createElement("div");i.className="block-content";const o=document.createElement("span");o.className="block-bullet",o.textContent="\u2022";const n=document.createElement("div");return n.className="block-text",n.innerHTML=E(e.htmlContent),i.appendChild(o),i.appendChild(n),t.appendChild(i),e.children&&e.children.length>0&&p(e.children,t),t}function E(e){return e.replace(/<a href="([^"]+)">([^<]+)<\/a>/g,(t,i,o)=>`<a href="#" class="page-link" onclick="navigateToPage('${o}')">${o}</a>`)}window.navigateToPage=function(e){m(e)};function g(){if(a.length>0){const e=a.pop();c=e,m(e),a.length===0&&(u.disabled=!0)}}function b(e){if(!e||e.length===0){d.innerHTML='<div class="empty-state">No backlinks found</div>';return}e.forEach(t=>{const i=document.createElement("div");i.className="backlink-item";const o=document.createElement("div");o.className="backlink-source",o.textContent=t.sourcePage,o.onclick=()=>navigateToPage(t.sourcePage);const n=document.createElement("div");n.className="backlink-blocks",n.textContent=`Referenced in: ${t.blockIds.join(", ")}`,i.appendChild(o),i.appendChild(n),d.appendChild(i)})}window.addEventListener("error",e=>{console.error("Application error:",e.error)});document.addEventListener("keydown",e=>{e.key==="Escape"&&g()});
